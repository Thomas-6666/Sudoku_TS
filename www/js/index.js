function _(b){function h(q){q.stopPropagation();const{offsetX:L,offsetY:W}=q,F=Math.min(Math.floor(L/b.ui.cellSize),8),X=Math.min(Math.floor(W/b.ui.cellSize),8),$=b.getSelectedCell();if($===null||$[0]!==F||$[1]!==X)b.setSelectedCell([F,X]),b.refreshGrid()}function A(q){if(q.stopPropagation(),b.getSelectedCell()!==null)b.setSelectedCell(null),b.refreshGrid()}function K(q){if(q.stopPropagation(),q.key>="1"&&q.key<="9"&&b.getSelectedCell()!==null)b.toggle(parseInt(q.key))}b.canvas.addEventListener("mousemove",h),b.canvas.addEventListener("mouseout",A),document.onkeyup=K}class N{b;h;static _uis=new WeakMap;static bgColor="#DDD";static thinLineColor="#AAA";static boldLineColor="#000";static impactedColor="#eec";static selectedColor="#ff6";static get(b){if(N._uis.has(b))return N._uis.get(b);const h=b.getContext("2d");if(h===null)return!1;const A=new N(b,h);return N._uis.set(b,A),A}_cellSize;constructor(b,h){this._canvas=b;this._ctx=h;this._cellSize=Math.round(Math.min(b.width,b.height)/9)}get width(){return this._canvas.width}get height(){return this._canvas.height}get cellSize(){return this._cellSize}clearCanvas(){return this._ctx.fillStyle=N.bgColor,this._ctx.fillRect(0,0,this.width,this.height),this}drawCell(b,h,A=this._cellSize,K=N.thinLineColor,q){const L=b*A,W=h*A;if(q)this._ctx.fillStyle=q,this._ctx.fillRect(L+1,W+1,A-2,A-2);return this._ctx.strokeStyle=K,this._ctx.strokeRect(L,W,A,A),this}drawRow(b,h){for(let A=0;A<9;A++)this.drawCell(A,b,this._cellSize,N.thinLineColor,h);return this}drawColumn(b,h){for(let A=0;A<9;A++)this.drawCell(b,A,this._cellSize,N.thinLineColor,h);return this}drawGroup(b,h,A){this.drawCell(b,h,this._cellSize*3,N.boldLineColor,A);for(let K=0;K<3;K++)for(let q=0;q<3;q++)this.drawCell(b*3+q,h*3+K,this._cellSize,N.thinLineColor);return this}drawCellValue(b,h,A){this._ctx.fillStyle="#000",this._ctx.font="bold 60px Arial",this._ctx.textBaseline="middle",this._ctx.textAlign="center";const K=b*this._cellSize+Math.floor(this._cellSize*0.5),q=h*this._cellSize+Math.floor(this._cellSize*0.575);return this._ctx.fillText(A.toString(),K,q),this}drawCellDomain(b,h,A){this._ctx.fillStyle="#000",this._ctx.font="16px Arial",this._ctx.textBaseline="top",this._ctx.textAlign="start";const K=Math.max(this._cellSize-2,Math.floor(this._cellSize*0.8)),q=Math.floor(K/3),L=Math.max(1,Math.floor(this._cellSize*0.1)),W=b*this._cellSize+L,F=h*this._cellSize+L;for(let X=1;X<=9;X++){const $=A.includes(X)?X:null,T=(X-1)%3,H=Math.floor((X-1)/3),O=W+q*T,B=F+q*H;this._ctx.fillText($!==null?$.toString():"",O,B)}return this}drawEmptyGrid(){this.clearCanvas();for(let b=0;b<3;b++)for(let h=0;h<3;h++)this.drawGroup(h,b);return this}colorizeSelectedStuff(b){if(b===null)return this;const h=[Math.floor(b[0]/3),Math.floor(b[1]/3)];return this.drawRow(b[1],N.impactedColor).drawColumn(b[0],N.impactedColor).drawGroup(h[0],h[1],N.impactedColor).drawCell(b[0],b[1],this._cellSize,N.thinLineColor,N.selectedColor),this}}function J(){const b=new WebSocket(`ws://${location.host}`);b.onopen=()=>setInterval(()=>b.send("ping"),5000),b.onmessage=(h)=>{if(h.data!=="Well received")console.log(h.data);if(h.data==="reload")location.reload()}}var f=function(b){const h=document.getElementById(b);if(h===null)return console.error("Cannot get the given Canvas 2D rendering context"),!1;const A=N.get(h);if(!A)return!1;const K=[],q=[];for(let L=0;L<9;L++){K.push([]),q.push([]);for(let W=0;W<9;W++)K[L].push([1,2,3,4,5,6,7,8,9]),q[L].push(null)}return{canvas:h,ui:A,cellDomains:K,cellValues:q}},g=function(b){const{canvas:h,ui:A,cellDomains:K,cellValues:q}=b;let L=null;function W(B,E){if(q[E][B]!==null)A.drawCellValue(B,E,q[E][B]);else A.drawCellDomain(B,E,K[E][B])}function F(){for(let B=0;B<9;B++)for(let E=0;E<9;E++)W(E,B)}function X(B,E,Q){const R=K[E][B],Y=R.indexOf(Q);if(Y!==-1)R.splice(Y,1)}function $(B,E,Q){const R=K[E][B];if(!R.includes(Q))R.push(Q)}function T(B,E,Q,R){const Y=R?X:$;for(let Z=0;Z<9;Z++){if(Z!==B)Y(Z,E,Q);if(Z!==E)Y(B,Z,Q)}const G=Math.floor(B/3),x=Math.floor(E/3);for(let Z=0;Z<3;Z++)for(let P=0;P<3;P++){const w=G*3+P,M=x*3+Z;if(w!==B&&M!==E)Y(w,M,Q)}}function H(B){const E=L[0],Q=L[1];if(q[Q][E]===null){if(K[Q][E].includes(B))q[Q][E]=B,T(E,Q,B,!0),O()}else if(q[Q][E]===B){q[Q][E]=null,T(E,Q,B,!1);for(let R=0;R<9;R++)for(let Y=0;Y<9;Y++)if(q[R][Y]===B)T(Y,R,B,!0);O()}}function O(){A.drawEmptyGrid().colorizeSelectedStuff(L),F()}_({canvas:h,ui:A,refreshGrid:O,toggle:H,getSelectedCell:()=>L,setSelectedCell:(B)=>L=B}),J(),O()},y=f("sudokuCanvas");if(y)g(y);var V=new Domain([1,2]),C=new Variable(V);
